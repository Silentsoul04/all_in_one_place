RPC

## RPC on linux  (port 111)

### Basics

- ```rpcinfo -p <IP>```
- ```showmount -e <IP>```
- ```sudo mount ip:/folder /mnt -vvv```

### RPC v3

- How to know : `mount | grep <mounted>`

- In v3, you can set your uid locally and nfs will respect that. So ```cat /etc/passwd``` on the victim, check the uid, and connect on this mounted nfs with a user who have the same uid as the one on the victim, like this : `useradd -u <uid> <user>`, then `sudo su vulnix` and you are now able to go in the mounted nfs share.

- Root, userid 0. There is an option, ```root_squash```, that doesnâ€™t allow root connections over nfs, and rather converts them to nobody. If it is enabled, you'll have permission denied everywhere. 

- If you can edit /etc/export, you can change this option to `no_root_squash` in `/root` and after that, find a way to restart the service (you may have to wait or reboot ...). Then, mount it again, as root go into the shared folder, add your ssh key for example, connect on the machine and run it.

### Exploit this easily

- Use `nfspy` : `sudo nfspysh -o server=192.168.56.102:/home/vulnix`
- Put file : `put <path_to_file>`





